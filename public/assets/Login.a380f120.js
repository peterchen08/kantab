var A=Object.defineProperty,T=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var _=(e,s,o)=>s in e?A(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,k=(e,s)=>{for(var o in s||(s={}))V.call(s,o)&&_(e,o,s[o]);if(f)for(var o of f(s))F.call(s,o)&&_(e,o,s[o]);return e},v=(e,s)=>T(e,S(s));import{A as C}from"./auth.mixin.0a2474ce.js";import{v as E,x as g,o as l,k as r,s as t,t as w,p as c,z as p,A as u,n as m,w as y,E as M,q as N,I as b}from"./vendor.bd38f07c.js";import{_ as U,a as D}from"./index.3aeb53d5.js";const I={mixins:[C],data(){return{need2FAToken:!1,token:""}},methods:v(k({},E(D,["login"])),{async process(){var e,s,o,d,i;try{const n=await this.login({email:this.email,password:this.password,token:this.need2FAToken?this.token:null});n.passwordless&&(this.success=`Magic link has been sent to '${n.email}'. Use it to sign in.`)}catch(n){if(console.log(n),((i=(d=(o=(s=(e=n==null?void 0:n.response)==null?void 0:e.errors)==null?void 0:s[0])==null?void 0:o.extensions)==null?void 0:d.exception)==null?void 0:i.type)=="ERR_MISSING_2FA_CODE"){this.need2FAToken=!0,this.token="",this.success="Open your authenticator app and enter the verification code",this.$nextTick(()=>this.$refs.token.focus());return}throw n}}})},$=t("h3",{class:"my-4"},"Sign In",-1),j={key:0,class:"alert bg-negative mb-2"},B={key:1,class:"alert bg-positive mb-2"},z={class:"form-element no-label"},L=t("i",{class:"icon fa fa-user"},null,-1),O={class:"form-element no-label mt-2"},R=t("i",{class:"icon fa fa-key"},null,-1),q={class:"text-right text-xs mt-1 text-gray-400"},G=b("Forgot password?"),P={key:2,class:"form-element no-label mt-2"},H=t("i",{class:"icon fa fa-lock"},null,-1),J={class:"mt-4 w-full"},K={class:"text-sm"},Q=t("span",null,"Don't have an account?",-1),W=b("Sign Up");function X(e,s,o,d,i,n){const h=g("router-link"),x=g("social-auth");return l(),r("div",null,[$,t("form",{onSubmit:s[3]||(s[3]=N((...a)=>e.submit&&e.submit(...a),["prevent"]))},[e.error?(l(),r("div",j,w(e.error),1)):c("",!0),e.success?(l(),r("div",B,w(e.success),1)):c("",!0),t("div",z,[p(t("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>e.email=a),type:"text",name:"email",placeholder:"E-mail or username",class:"pr-8"},null,512),[[u,e.email]]),L]),t("div",O,[p(t("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>e.password=a),type:"password",name:"password",placeholder:"Password",class:"pr-8"},null,512),[[u,e.password]]),R]),t("div",q,[m(h,{class:"hover:underline",to:"/forgot-password"},{default:y(()=>[G]),_:1})]),i.need2FAToken?(l(),r("div",P,[p(t("input",{ref:"token","onUpdate:modelValue":s[2]||(s[2]=a=>i.token=a),type:"text",name:"token",placeholder:"Two-factor code",class:"pr-8"},null,512),[[u,i.token]]),H])):c("",!0),t("div",J,[t("button",{type:"submit",class:M(["button primary w-full",{loading:e.processing}])}," Login ",2)]),m(x,{class:"my-4"}),t("div",K,[Q,m(h,{class:"pl-1 text-primary font-bold hover:underline",to:"/signup"},{default:y(()=>[W]),_:1})])],32)])}var te=U(I,[["render",X]]);export{te as default};
